<!--pages/cart/cart.wxml-->
<wxs src='../../wxs/form.wxs' module='form' />
<block wx:if='{{!cartList.length}}'>
  <view class="warn">
    亲，您的购物车空空如也～，赶紧去添加点商品吧～
  </view>
</block>
<block wx:else>
<scroll-view class="m-cart" scroll-y>
  <view class="item">
    <block wx:for='{{cartList}}' wx:key='index'>
      <view class="item-list">
         <view class="item-icon">
          <m-check-button isSelected='{{item.isSelected}}' 
          bind:tap="itemCheckClick"
          data-index="{{index}}"/> 
        </view>
        <view class="item-image">
          <image src="{{item.imageURL}}" mode='aspectFill'></image>
        </view>
        <view class="item-info"> 
          <view class="shop-name">{{item.name}}</view>
          <view class="title">{{item.title}}</view>
          <view class="desc">{{item.desc}}</view>
          <view class="price-count">
            <view class="price">¥{{item.price}}</view>
            <view class="count">
              <text class="reduce" bindtap="reduce" data-index="{{index}}">-</text>
              <text class="count-text">{{item.count}}</text>
              <text class="add" bindtap="add" data-index="{{index}}">+</text>
            </view>
          </view>
        </view>
      </view>
    </block>
  </view>
</scroll-view>
</block>
<view class="bottom-bar">
  <m-check-button isSelected = '{{form.checkAll(cartList)}}' 
                  data-flag="{{form.checkAll(cartList)}}"
                  bindtap="toggleCheckAll">
                  <text>全选</text>
                  </m-check-button>
  <view class="left">
    <text>合计:</text>
    <text class="price">¥{{form.allPrice(cartList)}}</text>
  </view>
  <view class="right">
    <button size="mini" class="button" bindtap="showToast">去结算({{cartList.length}})</button>
  </view>
</view>